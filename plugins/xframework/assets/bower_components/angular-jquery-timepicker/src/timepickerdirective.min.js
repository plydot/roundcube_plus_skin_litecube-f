var m=angular.module("ui.timepicker",[]);m.value("uiTimepickerConfig",{step:15});m.directive("uiTimepicker",["uiTimepickerConfig","$parse","$window",function(c,b,f){var e=f.moment;var d=function(g){return e!==undefined&&e.isMoment(g)&&g.isValid()};var a=function(g){return g!==null&&(angular.isDate(g)||d(g))};return{restrict:"A",require:"ngModel",scope:{ngModel:"=",baseDate:"=",uiTimepicker:"=",},priority:1,link:function(r,l,p,k){var h=angular.copy(c);var g=h.asMoment||false;delete h.asMoment;k.$render=function(){var s=k.$modelValue;if(!angular.isDefined(s)){return}if(s!==null&&s!==""&&!a(s)){throw new Error("ng-Model value must be a Date or Moment object - currently it is a "+typeof s+".")}if(d(s)){s=s.toDate()}if(!l.is(":focus")&&!n()){l.timepicker("setTime",s)}if(s===null){q()}};r.$watch("ngModel",function(){k.$render()},true);h.appendTo=h.appendTo||l.parent();l.timepicker(angular.extend(h,r.uiTimepicker?r.uiTimepicker:{}));var q=function(){l.timepicker("setTime",null)};var j=function(){return l.val().trim()};var n=function(){return j()&&k.$modelValue===null};l.on("$destroy",function(){l.timepicker("remove")});var i=function(){var s=k.$modelValue?k.$modelValue:r.baseDate;return d(s)?s.toDate():s};var o=function(s){return g?e(s):s};if(l.is("input")){k.$parsers.unshift(function(t){var s=l.timepicker("getTime",i());return s?o(s):s});k.$validators.time=function(s){return(!p.required&&!j())?true:a(s)}}else{l.on("changeTime",function(){r.$evalAsync(function(){var s=l.timepicker("getTime",i());k.$setViewValue(s)})})}}}}]);