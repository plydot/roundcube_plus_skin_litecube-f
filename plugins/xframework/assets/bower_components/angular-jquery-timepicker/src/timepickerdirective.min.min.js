var m=angular.module("ui.timepicker",[]);m.value("uiTimepickerConfig",{step:15});m.directive("uiTimepicker",["uiTimepickerConfig","$parse","$window",function(l,g,i){var j=i.moment;var k=function(a){return j!==undefined&&j.isMoment(a)&&a.isValid()};var h=function(a){return a!==null&&(angular.isDate(a)||k(a))};return{restrict:"A",require:"ngModel",scope:{ngModel:"=",baseDate:"=",uiTimepicker:"=",},priority:1,link:function(a,f,c,s){var v=angular.copy(l);var w=v.asMoment||false;delete v.asMoment;s.$render=function(){var n=s.$modelValue;if(!angular.isDefined(n)){return}if(n!==null&&n!==""&&!h(n)){throw new Error("ng-Model value must be a Date or Moment object - currently it is a "+typeof n+".")}if(k(n)){n=n.toDate()}if(!f.is(":focus")&&!e()){f.timepicker("setTime",n)}if(n===null){b()}};a.$watch("ngModel",function(){s.$render()},true);v.appendTo=v.appendTo||f.parent();f.timepicker(angular.extend(v,a.uiTimepicker?a.uiTimepicker:{}));var b=function(){f.timepicker("setTime",null)};var t=function(){return f.val().trim()};var e=function(){return t()&&s.$modelValue===null};f.on("$destroy",function(){f.timepicker("remove")});var u=function(){var n=s.$modelValue?s.$modelValue:a.baseDate;return k(n)?n.toDate():n};var d=function(n){return w?j(n):n};if(f.is("input")){s.$parsers.unshift(function(n){var o=f.timepicker("getTime",u());return o?d(o):o});s.$validators.time=function(n){return(!c.required&&!t())?true:h(n)}}else{f.on("changeTime",function(){a.$evalAsync(function(){var n=f.timepicker("getTime",u());s.$setViewValue(n)})})}}}}]);