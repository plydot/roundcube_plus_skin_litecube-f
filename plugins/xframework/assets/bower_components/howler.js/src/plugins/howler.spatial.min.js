/*
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.5
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
(function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(d){var b=this;if(!b.ctx||!b.ctx.listener){return b}for(var c=b._howls.length-1;c>=0;c--){b._howls[c].stereo(d)}return b};HowlerGlobal.prototype.pos=function(b,e,d){var c=this;if(!c.ctx||!c.ctx.listener){return c}e=(typeof e!=="number")?c._pos[1]:e;d=(typeof d!=="number")?c._pos[2]:d;if(typeof b==="number"){c._pos=[b,e,d];c.ctx.listener.setPosition(c._pos[0],c._pos[1],c._pos[2])}else{return c._pos}return c};HowlerGlobal.prototype.orientation=function(b,i,h,e,d,g){var c=this;if(!c.ctx||!c.ctx.listener){return c}var f=c._orientation;i=(typeof i!=="number")?f[1]:i;h=(typeof h!=="number")?f[2]:h;e=(typeof e!=="number")?f[3]:e;d=(typeof d!=="number")?f[4]:d;g=(typeof g!=="number")?f[5]:g;if(typeof b==="number"){c._orientation=[b,i,h,e,d,g];c.ctx.listener.setOrientation(b,i,h,e,d,g)}else{return f}return c};Howl.prototype.init=(function(b){return function(d){var c=this;c._orientation=d.orientation||[1,0,0];c._stereo=d.stereo||null;c._pos=d.pos||null;c._pannerAttr={coneInnerAngle:typeof d.coneInnerAngle!=="undefined"?d.coneInnerAngle:360,coneOuterAngle:typeof d.coneOuterAngle!=="undefined"?d.coneOuterAngle:360,coneOuterGain:typeof d.coneOuterGain!=="undefined"?d.coneOuterGain:0,distanceModel:typeof d.distanceModel!=="undefined"?d.distanceModel:"inverse",maxDistance:typeof d.maxDistance!=="undefined"?d.maxDistance:10000,panningModel:typeof d.panningModel!=="undefined"?d.panningModel:"HRTF",refDistance:typeof d.refDistance!=="undefined"?d.refDistance:1,rolloffFactor:typeof d.rolloffFactor!=="undefined"?d.rolloffFactor:1};c._onstereo=d.onstereo?[{fn:d.onstereo}]:[];c._onpos=d.onpos?[{fn:d.onpos}]:[];c._onorientation=d.onorientation?[{fn:d.onorientation}]:[];return b.call(this,d)}})(Howl.prototype.init);Howl.prototype.stereo=function(g,h){var c=this;if(!c._webAudio){return c}if(c._state!=="loaded"){c._queue.push({event:"stereo",action:function(){c.stereo(g,h)}});return c}var b=(typeof Howler.ctx.createStereoPanner==="undefined")?"spatial":"stereo";if(typeof h==="undefined"){if(typeof g==="number"){c._stereo=g;c._pos=[g,0,0]}else{return c._stereo}}var e=c._getSoundIds(h);for(var d=0;d<e.length;d++){var f=c._soundById(e[d]);if(f){if(typeof g==="number"){f._stereo=g;f._pos=[g,0,0];if(f._node){f._pannerAttr.panningModel="equalpower";if(!f._panner||!f._panner.pan){a(f,b)}if(b==="spatial"){f._panner.setPosition(g,0,0)}else{f._panner.pan.value=g}}c._emit("stereo",f._id)}else{return f._stereo}}}return c};Howl.prototype.pos=function(b,j,g,h){var c=this;if(!c._webAudio){return c}if(c._state!=="loaded"){c._queue.push({event:"pos",action:function(){c.pos(b,j,g,h)}});return c}j=(typeof j!=="number")?0:j;g=(typeof g!=="number")?-0.5:g;if(typeof h==="undefined"){if(typeof b==="number"){c._pos=[b,j,g]}else{return c._pos}}var e=c._getSoundIds(h);for(var d=0;d<e.length;d++){var f=c._soundById(e[d]);if(f){if(typeof b==="number"){f._pos=[b,j,g];if(f._node){if(!f._panner||f._panner.pan){a(f,"spatial")}f._panner.setPosition(b,j,g)}c._emit("pos",f._id)}else{return f._pos}}}return c};Howl.prototype.orientation=function(b,j,g,h){var c=this;if(!c._webAudio){return c}if(c._state!=="loaded"){c._queue.push({event:"orientation",action:function(){c.orientation(b,j,g,h)}});return c}j=(typeof j!=="number")?c._orientation[1]:j;g=(typeof g!=="number")?c._orientation[2]:g;if(typeof h==="undefined"){if(typeof b==="number"){c._orientation=[b,j,g]}else{return c._orientation}}var e=c._getSoundIds(h);for(var d=0;d<e.length;d++){var f=c._soundById(e[d]);if(f){if(typeof b==="number"){f._orientation=[b,j,g];if(f._node){if(!f._panner){if(!f._pos){f._pos=c._pos||[0,0,-0.5]}a(f,"spatial")}f._panner.setOrientation(b,j,g)}c._emit("orientation",f._id)}else{return f._orientation}}}return c};Howl.prototype.pannerAttr=function(){var k=this;var g=arguments;var e,d,j;if(!k._webAudio){return k}if(g.length===0){return k._pannerAttr}else{if(g.length===1){if(typeof g[0]==="object"){e=g[0];if(typeof d==="undefined"){if(!e.pannerAttr){e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}}k._pannerAttr={coneInnerAngle:typeof e.pannerAttr.coneInnerAngle!=="undefined"?e.pannerAttr.coneInnerAngle:k._coneInnerAngle,coneOuterAngle:typeof e.pannerAttr.coneOuterAngle!=="undefined"?e.pannerAttr.coneOuterAngle:k._coneOuterAngle,coneOuterGain:typeof e.pannerAttr.coneOuterGain!=="undefined"?e.pannerAttr.coneOuterGain:k._coneOuterGain,distanceModel:typeof e.pannerAttr.distanceModel!=="undefined"?e.pannerAttr.distanceModel:k._distanceModel,maxDistance:typeof e.pannerAttr.maxDistance!=="undefined"?e.pannerAttr.maxDistance:k._maxDistance,refDistance:typeof e.pannerAttr.refDistance!=="undefined"?e.pannerAttr.refDistance:k._refDistance,rolloffFactor:typeof e.pannerAttr.rolloffFactor!=="undefined"?e.pannerAttr.rolloffFactor:k._rolloffFactor,panningModel:typeof e.pannerAttr.panningModel!=="undefined"?e.pannerAttr.panningModel:k._panningModel}}}else{j=k._soundById(parseInt(g[0],10));return j?j._pannerAttr:k._pannerAttr}}else{if(g.length===2){e=g[0];d=parseInt(g[1],10)}}}var c=k._getSoundIds(d);for(var f=0;f<c.length;f++){j=k._soundById(c[f]);if(j){var h=j._pannerAttr;h={coneInnerAngle:typeof e.coneInnerAngle!=="undefined"?e.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof e.coneOuterAngle!=="undefined"?e.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof e.coneOuterGain!=="undefined"?e.coneOuterGain:h.coneOuterGain,distanceModel:typeof e.distanceModel!=="undefined"?e.distanceModel:h.distanceModel,maxDistance:typeof e.maxDistance!=="undefined"?e.maxDistance:h.maxDistance,refDistance:typeof e.refDistance!=="undefined"?e.refDistance:h.refDistance,rolloffFactor:typeof e.rolloffFactor!=="undefined"?e.rolloffFactor:h.rolloffFactor,panningModel:typeof e.panningModel!=="undefined"?e.panningModel:h.panningModel};var b=j._panner;if(b){b.coneInnerAngle=h.coneInnerAngle;b.coneOuterAngle=h.coneOuterAngle;b.coneOuterGain=h.coneOuterGain;b.distanceModel=h.distanceModel;b.maxDistance=h.maxDistance;b.refDistance=h.refDistance;b.rolloffFactor=h.rolloffFactor;b.panningModel=h.panningModel}else{if(!j._pos){j._pos=k._pos||[0,0,-0.5]}a(j,"spatial")}}}return k};Sound.prototype.init=(function(b){return function(){var c=this;var d=c._parent;c._orientation=d._orientation;c._stereo=d._stereo;c._pos=d._pos;c._pannerAttr=d._pannerAttr;b.call(this);if(c._stereo){d.stereo(c._stereo)}else{if(c._pos){d.pos(c._pos[0],c._pos[1],c._pos[2],c._id)}}}})(Sound.prototype.init);Sound.prototype.reset=(function(b){return function(){var c=this;var d=c._parent;c._orientation=d._orientation;c._pos=d._pos;c._pannerAttr=d._pannerAttr;return b.call(this)}})(Sound.prototype.reset);var a=function(c,b){b=b||"spatial";if(b==="spatial"){c._panner=Howler.ctx.createPanner();c._panner.coneInnerAngle=c._pannerAttr.coneInnerAngle;c._panner.coneOuterAngle=c._pannerAttr.coneOuterAngle;c._panner.coneOuterGain=c._pannerAttr.coneOuterGain;c._panner.distanceModel=c._pannerAttr.distanceModel;c._panner.maxDistance=c._pannerAttr.maxDistance;c._panner.refDistance=c._pannerAttr.refDistance;c._panner.rolloffFactor=c._pannerAttr.rolloffFactor;c._panner.panningModel=c._pannerAttr.panningModel;c._panner.setPosition(c._pos[0],c._pos[1],c._pos[2]);c._panner.setOrientation(c._orientation[0],c._orientation[1],c._orientation[2])}else{c._panner=Howler.ctx.createStereoPanner();c._panner.pan.value=c._stereo}c._panner.connect(c._node);if(!c._paused){c._parent.pause(c._id,true).play(c._id)}}})();