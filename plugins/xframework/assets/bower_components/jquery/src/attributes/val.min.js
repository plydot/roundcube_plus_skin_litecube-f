define(["../core","../core/stripAndCollapse","./support","../core/nodeName","../core/init"],function(d,b,a,e){var c=/\r/g;d.fn.extend({val:function(i){var f,g,j,h=this[0];if(!arguments.length){if(h){f=d.valHooks[h.type]||d.valHooks[h.nodeName.toLowerCase()];if(f&&"get" in f&&(g=f.get(h,"value"))!==undefined){return g}g=h.value;if(typeof g==="string"){return g.replace(c,"")}return g==null?"":g}return}j=d.isFunction(i);return this.each(function(k){var l;if(this.nodeType!==1){return}if(j){l=i.call(this,k,d(this).val())}else{l=i}if(l==null){l=""}else{if(typeof l==="number"){l+=""}else{if(Array.isArray(l)){l=d.map(l,function(m){return m==null?"":m+""})}}}f=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()];if(!f||!("set" in f)||f.set(this,l,"value")===undefined){this.value=l}})}});d.extend({valHooks:{option:{get:function(f){var g=d.find.attr(f,"value");return g!=null?g:b(d.text(f))}},select:{get:function(f){var m,h,g,o=f.options,k=f.selectedIndex,j=f.type==="select-one",n=j?null:[],l=j?k+1:o.length;if(k<0){g=l}else{g=j?k:0}for(;g<l;g++){h=o[g];if((h.selected||g===k)&&!h.disabled&&(!h.parentNode.disabled||!e(h.parentNode,"optgroup"))){m=d(h).val();if(j){return m}n.push(m)}}return n},set:function(k,l){var m,j,g=k.options,f=d.makeArray(l),h=g.length;while(h--){j=g[h];if(j.selected=d.inArray(d.valHooks.option.get(j),f)>-1){m=true}}if(!m){k.selectedIndex=-1}return f}}}});d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(f,g){if(Array.isArray(g)){return(f.checked=d.inArray(d(f).val(),g)>-1)}}};if(!a.checkOn){d.valHooks[this].get=function(f){return f.getAttribute("value")===null?"on":f.value}}})});