define(["./core","./var/document","./var/documentElement","./var/rnothtmlwhite","./var/slice","./data/var/dataPriv","./core/nodeName","./core/init","./selector"],function(m,g,j,e,i,n,h){var l=/^key/,c=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,b=/^([^.]*)(?:\.(.+)|)/;function d(){return true}function a(){return false}function k(){try{return g.activeElement}catch(o){}}function f(t,q,o,u,s,p){var v,r;if(typeof q==="object"){if(typeof o!=="string"){u=u||o;o=undefined}for(r in q){f(t,r,o,u,q[r],p)}return t}if(u==null&&s==null){s=o;u=o=undefined}else{if(s==null){if(typeof o==="string"){s=u;u=undefined}else{s=u;u=o;o=undefined}}}if(s===false){s=a}else{if(!s){return t}}if(p===1){v=s;s=function(w){m().off(w);return v.apply(this,arguments)};s.guid=v.guid||(v.guid=m.guid++)}return t.each(function(){m.event.add(this,q,s,u,o)})}m.event={global:{},add:function(s,y,F,v,u){var q,x,w,E,D,C,A,r,B,o,p,z=n.get(s);if(!z){return}if(F.handler){q=F;F=q.handler;u=q.selector}if(u){m.find.matchesSelector(j,u)}if(!F.guid){F.guid=m.guid++}if(!(E=z.events)){E=z.events={}}if(!(x=z.handle)){x=z.handle=function(t){return typeof m!=="undefined"&&m.event.triggered!==t.type?m.event.dispatch.apply(s,arguments):undefined}}y=(y||"").match(e)||[""];D=y.length;while(D--){w=b.exec(y[D])||[];B=p=w[1];o=(w[2]||"").split(".").sort();if(!B){continue}A=m.event.special[B]||{};B=(u?A.delegateType:A.bindType)||B;A=m.event.special[B]||{};C=m.extend({type:B,origType:p,data:v,handler:F,guid:F.guid,selector:u,needsContext:u&&m.expr.match.needsContext.test(u),namespace:o.join(".")},q);if(!(r=E[B])){r=E[B]=[];r.delegateCount=0;if(!A.setup||A.setup.call(s,v,o,x)===false){if(s.addEventListener){s.addEventListener(B,x)}}}if(A.add){A.add.call(s,C);if(!C.handler.guid){C.handler.guid=F.guid}}if(u){r.splice(r.delegateCount++,0,C)}else{r.push(C)}m.event.global[B]=true}},remove:function(r,y,F,s,x){var v,u,w,E,D,C,A,q,B,o,p,z=n.hasData(r)&&n.get(r);if(!z||!(E=z.events)){return}y=(y||"").match(e)||[""];D=y.length;while(D--){w=b.exec(y[D])||[];B=p=w[1];o=(w[2]||"").split(".").sort();if(!B){for(B in E){m.event.remove(r,B+y[D],F,s,true)}continue}A=m.event.special[B]||{};B=(s?A.delegateType:A.bindType)||B;q=E[B]||[];w=w[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)");u=v=q.length;while(v--){C=q[v];if((x||p===C.origType)&&(!F||F.guid===C.guid)&&(!w||w.test(C.namespace))&&(!s||s===C.selector||s==="**"&&C.selector)){q.splice(v,1);if(C.selector){q.delegateCount--}if(A.remove){A.remove.call(r,C)}}}if(u&&!q.length){if(!A.teardown||A.teardown.call(r,o,z.handle)===false){m.removeEvent(r,B,z.handle)}delete E[B]}}if(m.isEmptyObject(E)){n.remove(r,"handle events")}},dispatch:function(q){var o=m.event.fix(q);var t,s,u,p,y,x,w=new Array(arguments.length),r=(n.get(this,"events")||{})[o.type]||[],v=m.event.special[o.type]||{};w[0]=o;for(t=1;t<arguments.length;t++){w[t]=arguments[t]}o.delegateTarget=this;if(v.preDispatch&&v.preDispatch.call(this,o)===false){return}x=m.event.handlers.call(this,o,r);t=0;while((p=x[t++])&&!o.isPropagationStopped()){o.currentTarget=p.elem;s=0;while((y=p.handlers[s++])&&!o.isImmediatePropagationStopped()){if(!o.rnamespace||o.rnamespace.test(y.namespace)){o.handleObj=y;o.data=y.data;u=((m.event.special[y.origType]||{}).handle||y.handler).apply(p.elem,w);if(u!==undefined){if((o.result=u)===false){o.preventDefault();o.stopPropagation()}}}}}if(v.postDispatch){v.postDispatch.call(this,o)}return o.result},handlers:function(o,q){var u,w,p,r,s,v=[],t=q.delegateCount,x=o.target;if(t&&x.nodeType&&!(o.type==="click"&&o.button>=1)){for(;x!==this;x=x.parentNode||this){if(x.nodeType===1&&!(o.type==="click"&&x.disabled===true)){r=[];s={};for(u=0;u<t;u++){w=q[u];p=w.selector+" ";if(s[p]===undefined){s[p]=w.needsContext?m(p,this).index(x)>-1:m.find(p,this,null,[x]).length}if(s[p]){r.push(w)}}if(r.length){v.push({elem:x,handlers:r})}}}}x=this;if(t<q.length){v.push({elem:x,handlers:q.slice(t)})}return v},addProp:function(o,p){Object.defineProperty(m.Event.prototype,o,{enumerable:true,configurable:true,get:m.isFunction(p)?function(){if(this.originalEvent){return p(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[o]}},set:function(q){Object.defineProperty(this,o,{enumerable:true,configurable:true,writable:true,value:q})}})},fix:function(o){return o[m.expando]?o:new m.Event(o)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==k()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&h(this,"input")){this.click();return false}},_default:function(o){return h(o.target,"a")}},beforeunload:{postDispatch:function(o){if(o.result!==undefined&&o.originalEvent){o.originalEvent.returnValue=o.result}}}}};m.removeEvent=function(p,o,q){if(p.removeEventListener){p.removeEventListener(o,q)}};m.Event=function(p,o){if(!(this instanceof m.Event)){return new m.Event(p,o)}if(p&&p.type){this.originalEvent=p;this.type=p.type;this.isDefaultPrevented=p.defaultPrevented||p.defaultPrevented===undefined&&p.returnValue===false?d:a;this.target=(p.target&&p.target.nodeType===3)?p.target.parentNode:p.target;this.currentTarget=p.currentTarget;this.relatedTarget=p.relatedTarget}else{this.type=p}if(o){m.extend(this,o)}this.timeStamp=p&&p.timeStamp||m.now();this[m.expando]=true};m.Event.prototype={constructor:m.Event,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,isSimulated:false,preventDefault:function(){var o=this.originalEvent;this.isDefaultPrevented=d;if(o&&!this.isSimulated){o.preventDefault()}},stopPropagation:function(){var o=this.originalEvent;this.isPropagationStopped=d;if(o&&!this.isSimulated){o.stopPropagation()}},stopImmediatePropagation:function(){var o=this.originalEvent;this.isImmediatePropagationStopped=d;if(o&&!this.isSimulated){o.stopImmediatePropagation()}this.stopPropagation()}};m.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(p){var o=p.button;if(p.which==null&&l.test(p.type)){return p.charCode!=null?p.charCode:p.keyCode}if(!p.which&&o!==undefined&&c.test(p.type)){if(o&1){return 1}if(o&2){return 3}if(o&4){return 2}return 0}return p.which}},m.event.addProp);m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(p,o){m.event.special[p]={delegateType:o,bindType:o,handle:function(s){var q,u=this,t=s.relatedTarget,r=s.handleObj;if(!t||(t!==u&&!m.contains(u,t))){s.type=r.origType;q=r.handler.apply(this,arguments);s.type=o}return q}}});m.fn.extend({on:function(p,o,r,q){return f(this,p,o,r,q)},one:function(p,o,r,q){return f(this,p,o,r,q,1)},off:function(q,o,s){var p,r;if(q&&q.preventDefault&&q.handleObj){p=q.handleObj;m(q.delegateTarget).off(p.namespace?p.origType+"."+p.namespace:p.origType,p.selector,p.handler);return this}if(typeof q==="object"){for(r in q){this.off(r,o,q[r])}return this}if(o===false||typeof o==="function"){s=o;o=undefined}if(s===false){s=a}return this.each(function(){m.event.remove(this,q,s,o)})}});return m});