define(["../core","../var/document"],function(e,a){var f=[],b=function(g){f.push(g)},c=function(g){window.setTimeout(function(){g.call(a,e)})};e.fn.ready=function(g){b(g);return this};e.extend({isReady:false,readyWait:1,ready:function(g){if(g===true?--e.readyWait:e.isReady){return}e.isReady=true;if(g!==true&&--e.readyWait>0){return}b=function(h){f.push(h);while(f.length){h=f.shift();if(e.isFunction(h)){c(h)}}};b()}});e.ready.then=e.fn.ready;function d(){a.removeEventListener("DOMContentLoaded",d);window.removeEventListener("load",d);e.ready()}if(a.readyState==="complete"||(a.readyState!=="loading"&&!a.documentElement.doScroll)){window.setTimeout(e.ready)}else{a.addEventListener("DOMContentLoaded",d);window.addEventListener("load",d)}});