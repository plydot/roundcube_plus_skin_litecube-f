/*
 * jquery-timepicker v1.8.11 - A jQuery timepicker plugin inspired by Google Calendar. It supports both mouse and keyboard navigation.
 * Copyright (c) 2015 Jon Thornton - http://jonthornton.github.com/jquery-timepicker/
 * License: MIT
 */
(function(a){if(typeof exports==="object"&&exports&&typeof module==="object"&&module&&module.exports===exports){a(require("jquery"))}else{if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}}(function(h){var n=d();var l=86400;var u={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"};var w={init:function(A){return this.each(function(){var B=h(this);var F=[];for(var D in h.fn.timepicker.defaults){if(B.data(D)){F[D]=B.data(D)}}var E=h.extend({},h.fn.timepicker.defaults,F,A);if(E.lang){u=h.extend(u,E.lang)}E=g(E);B.data("timepicker-settings",E);B.addClass("ui-timepicker-input");if(E.useSelect){k(B)}else{B.prop("autocomplete","off");if(E.showOn){for(var C in E.showOn){B.on(E.showOn[C]+".timepicker",w.show)}}B.on("change.timepicker",f);B.on("keydown.timepicker",j);B.on("keyup.timepicker",z);if(E.disableTextInput){B.on("keydown.timepicker",r)}f.call(B.get(0))}})},show:function(D){var H=h(this);var A=H.data("timepicker-settings");if(D){D.preventDefault()}if(A.useSelect){H.data("timepicker-list").focus();return}if(s(H)){H.blur()}var E=H.data("timepicker-list");if(H.prop("readonly")){return}if(!E||E.length===0||typeof A.durationTime==="function"){k(H);E=H.data("timepicker-list")}if(q(E)){return}H.data("ui-timepicker-value",H.val());v(H,E);w.hide();E.show();var F={};if(A.orientation.match(/r/)){F.left=H.offset().left+H.outerWidth()-E.outerWidth()+parseInt(E.css("marginLeft").replace("px",""),10)}else{F.left=H.offset().left+parseInt(E.css("marginLeft").replace("px",""),10)}var I;if(A.orientation.match(/t/)){I="t"}else{if(A.orientation.match(/b/)){I="b"}else{if((H.offset().top+H.outerHeight(true)+E.outerHeight())>h(window).height()+h(window).scrollTop()){I="t"}else{I="b"}}}if(I=="t"){E.addClass("ui-timepicker-positioned-top");F.top=H.offset().top-E.outerHeight()+parseInt(E.css("marginTop").replace("px",""),10)}else{E.removeClass("ui-timepicker-positioned-top");F.top=H.offset().top+H.outerHeight()+parseInt(E.css("marginTop").replace("px",""),10)}E.offset(F);var B=E.find(".ui-timepicker-selected");if(!B.length){var G=p(a(H));if(G!==null){B=e(H,E,G)}else{if(A.scrollDefault){B=e(H,E,A.scrollDefault())}}}if(B&&B.length){var C=E.scrollTop()+B.position().top-B.outerHeight();E.scrollTop(C)}else{E.scrollTop(0)}if(A.stopScrollPropagation){h(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(K){K.preventDefault();var J=h(this).scrollTop();h(this).scrollTop(J+K.originalEvent.deltaY)})}h(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",o);h(window).on("resize.ui-timepicker",o);if(A.closeOnWindowScroll){h(document).on("scroll.ui-timepicker",o)}H.trigger("showTimepicker");return this},hide:function(C){var A=h(this);var B=A.data("timepicker-settings");if(B&&B.useSelect){A.blur()}h(".ui-timepicker-wrapper").each(function(){var F=h(this);if(!q(F)){return}var D=F.data("timepicker-input");var E=D.data("timepicker-settings");if(E&&E.selectOnBlur){m(D)}F.hide();D.trigger("hideTimepicker")});return this},option:function(A,B){if(typeof A=="string"&&typeof B=="undefined"){return h(this).data("timepicker-settings")[A]}return this.each(function(){var C=h(this);var D=C.data("timepicker-settings");var E=C.data("timepicker-list");if(typeof A=="object"){D=h.extend(D,A)}else{if(typeof A=="string"){D[A]=B}}D=g(D);C.data("timepicker-settings",D);if(E){E.remove();C.data("timepicker-list",false)}if(D.useSelect){k(C)}})},getSecondsFromMidnight:function(){return p(a(this))},getTime:function(E){var A=this;var B=a(A);if(!B){return null}var D=p(B);if(D===null){return null}if(!E){E=n}var C=new Date(E);C.setHours(D/3600);C.setMinutes(D%3600/60);C.setSeconds(D%60);C.setMilliseconds(0);return C},setTime:function(C){var A=this;var B=A.data("timepicker-settings");if(B.forceRoundTime){var D=t(p(C),B)}else{var D=y(p(C),B)}if(C&&D===null&&B.noneOption){D=C}c(A,D);if(A.data("timepicker-list")){v(A,A.data("timepicker-list"))}return this},remove:function(){var A=this;if(!A.hasClass("ui-timepicker-input")){return}var B=A.data("timepicker-settings");A.removeAttr("autocomplete","off");A.removeClass("ui-timepicker-input");A.removeData("timepicker-settings");A.off(".timepicker");if(A.data("timepicker-list")){A.data("timepicker-list").remove()}if(B.useSelect){A.show()}A.removeData("timepicker-list");return this}};function q(B){var A=B[0];return A.offsetWidth>0&&A.offsetHeight>0}function g(B){if(B.minTime){B.minTime=p(B.minTime)}if(B.maxTime){B.maxTime=p(B.maxTime)}if(B.durationTime&&typeof B.durationTime!=="function"){B.durationTime=p(B.durationTime)}if(B.scrollDefault=="now"){B.scrollDefault=function(){return B.roundingFunction(p(new Date()),B)}}else{if(B.scrollDefault&&typeof B.scrollDefault!="function"){var C=B.scrollDefault;B.scrollDefault=function(){return B.roundingFunction(p(C),B)}}else{if(B.minTime){B.scrollDefault=function(){return B.roundingFunction(B.minTime,B)}}}}if(h.type(B.timeFormat)==="string"&&B.timeFormat.match(/[gh]/)){B._twelveHourTime=true}if(B.showOnFocus===false&&B.showOn.indexOf("focus")!=-1){B.showOn.splice(B.showOn.indexOf("focus"),1)}if(B.disableTimeRanges.length>0){for(var A in B.disableTimeRanges){B.disableTimeRanges[A]=[p(B.disableTimeRanges[A][0]),p(B.disableTimeRanges[A][1])]}B.disableTimeRanges=B.disableTimeRanges.sort(function(E,D){return E[0]-D[0]});for(var A=B.disableTimeRanges.length-1;A>0;A--){if(B.disableTimeRanges[A][0]<=B.disableTimeRanges[A-1][1]){B.disableTimeRanges[A-1]=[Math.min(B.disableTimeRanges[A][0],B.disableTimeRanges[A-1][0]),Math.max(B.disableTimeRanges[A][1],B.disableTimeRanges[A-1][1])];B.disableTimeRanges.splice(A,1)}}}return B}function k(K){var S=K.data("timepicker-settings");var Q=K.data("timepicker-list");if(Q&&Q.length){Q.remove();K.data("timepicker-list",false)}if(S.useSelect){Q=h("<select />",{"class":"ui-timepicker-select"});var T=Q}else{Q=h("<ul />",{"class":"ui-timepicker-list"});var T=h("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});T.css({display:"none",position:"absolute"}).append(Q)}if(S.noneOption){if(S.noneOption===true){S.noneOption=(S.useSelect)?"Time...":"None"}if(h.isArray(S.noneOption)){for(var N in S.noneOption){if(parseInt(N,10)==N){var J=i(S.noneOption[N],S.useSelect);Q.append(J)}}}else{var J=i(S.noneOption,S.useSelect);Q.append(J)}}if(S.className){T.addClass(S.className)}if((S.minTime!==null||S.durationTime!==null)&&S.showDuration){var P=typeof S.step=="function"?"function":S.step;T.addClass("ui-timepicker-with-duration");T.addClass("ui-timepicker-step-"+S.step)}var R=S.minTime;if(typeof S.durationTime==="function"){R=p(S.durationTime())}else{if(S.durationTime!==null){R=S.durationTime}}var F=(S.minTime!==null)?S.minTime:0;var D=(S.maxTime!==null)?S.maxTime:(F+l-1);if(D<F){D+=l}if(D===l-1&&h.type(S.timeFormat)==="string"&&S.show2400){D=l}var L=S.disableTimeRanges;var C=0;var O=L.length;var U=S.step;if(typeof U!="function"){U=function(){return S.step}}for(var N=F,M=0;N<=D;M++,N+=U(M)*60){var B=N;var H=y(B,S);if(S.useSelect){var G=h("<option />",{value:H});G.text(H)}else{var G=h("<li />");G.addClass(B%86400<43200?"ui-timepicker-am":"ui-timepicker-pm");G.data("time",(B<=86400?B:B%86400));G.text(H)}if((S.minTime!==null||S.durationTime!==null)&&S.showDuration){var I=b(N-R,S.step);if(S.useSelect){G.text(G.text()+" ("+I+")")}else{var A=h("<span />",{"class":"ui-timepicker-duration"});A.text(" ("+I+")");G.append(A)}}if(C<O){if(B>=L[C][1]){C+=1}if(L[C]&&B>=L[C][0]&&B<L[C][1]){if(S.useSelect){G.prop("disabled",true)}else{G.addClass("ui-timepicker-disabled")}}}Q.append(G)}T.data("timepicker-input",K);K.data("timepicker-list",T);if(S.useSelect){if(K.val()){Q.val(t(p(K.val()),S))}Q.on("focus",function(){h(this).data("timepicker-input").trigger("showTimepicker")});Q.on("blur",function(){h(this).data("timepicker-input").trigger("hideTimepicker")});Q.on("change",function(){c(K,h(this).val(),"select")});c(K,Q.val(),"initial");K.hide().after(Q)}else{var E=S.appendTo;if(typeof E==="string"){E=h(E)}else{if(typeof E==="function"){E=E(K)}}E.append(T);v(K,Q);Q.on("mousedown touchstart","li",function(V){K.off("focus.timepicker");K.on("focus.timepicker-ie-hack",function(){K.off("focus.timepicker-ie-hack");K.on("focus.timepicker",w.show)});if(!s(K)){K[0].focus()}Q.find("li").removeClass("ui-timepicker-selected");h(this).addClass("ui-timepicker-selected");if(m(K)){K.trigger("hideTimepicker");Q.on("mouseup.timepicker touchend.timepicker","li",function(W){Q.off("mouseup.timepicker touchend.timepicker");T.hide()})}})}}function i(E,C){var A,B,D;if(typeof E=="object"){A=E.label;B=E.className;D=E.value}else{if(typeof E=="string"){A=E}else{h.error("Invalid noneOption value")}}if(C){return h("<option />",{value:D,"class":B,text:A})}else{return h("<li />",{"class":B,text:A}).data("time",String(D))}}function t(B,A){B=A.roundingFunction(B,A);if(B!==null){return y(B,A)}}function d(){return new Date(1970,0,1,0,0,0)}function o(C){var B=h(C.target);var A=B.closest(".ui-timepicker-input");if(A.length===0&&B.closest(".ui-timepicker-wrapper").length===0){w.hide();h(document).unbind(".ui-timepicker");h(window).unbind(".ui-timepicker")}}function s(A){var B=A.data("timepicker-settings");return((window.navigator.msMaxTouchPoints||"ontouchstart" in document)&&B.disableTouchKeyboard)}function e(A,E,D){if(!D&&D!==0){return false}var C=A.data("timepicker-settings");var B=false;var D=C.roundingFunction(D,C);E.find("li").each(function(F,H){var G=h(H);if(typeof G.data("time")!="number"){return}if(G.data("time")==D){B=G;return false}});return B}function v(B,E){E.find("li").removeClass("ui-timepicker-selected");var D=p(a(B),B.data("timepicker-settings"));if(D===null){return}var C=e(B,E,D);if(C){var A=C.offset().top-E.offset().top;if(A+C.outerHeight()>E.outerHeight()||A<0){E.scrollTop(E.scrollTop()+C.position().top-C.outerHeight())}C.addClass("ui-timepicker-selected")}}function f(F,C){if(this.value===""||C=="timepicker"){return}var B=h(this);if(B.is(":focus")&&(!F||F.type!="change")){return}var D=B.data("timepicker-settings");var G=p(this.value,D);if(G===null){B.trigger("timeFormatError");return}var A=false;if(D.minTime!==null&&G<D.minTime){A=true}else{if(D.maxTime!==null&&G>D.maxTime){A=true}}h.each(D.disableTimeRanges,function(){if(G>=this[0]&&G<this[1]){A=true;return false}});if(D.forceRoundTime){G=D.roundingFunction(G,D)}var E=y(G,D);if(A){if(c(B,E,"error")){B.trigger("timeRangeError")}}else{c(B,E)}}function a(A){if(A.is("input")){return A.val()}else{return A.data("ui-timepicker-value")}}function c(A,D,C){if(A.is("input")){A.val(D);var B=A.data("timepicker-settings");if(B.useSelect&&C!="select"&&C!="initial"){A.data("timepicker-list").val(t(p(D),B))}}if(A.data("ui-timepicker-value")!=D){A.data("ui-timepicker-value",D);if(C=="select"){A.trigger("selectTime").trigger("changeTime").trigger("change","timepicker")}else{if(C!="error"){A.trigger("changeTime")}}return true}else{A.trigger("selectTime");return false}}function r(A){switch(A.keyCode){case 13:case 9:return;default:A.preventDefault()}}function j(D){var A=h(this);var C=A.data("timepicker-list");if(!C||!q(C)){if(D.keyCode==40){w.show.call(A.get(0));C=A.data("timepicker-list");if(!s(A)){A.focus()}}else{return true}}switch(D.keyCode){case 13:if(m(A)){w.hide.apply(this)}D.preventDefault();return false;case 38:var B=C.find(".ui-timepicker-selected");if(!B.length){C.find("li").each(function(E,F){if(h(F).position().top>0){B=h(F);return false}});B.addClass("ui-timepicker-selected")}else{if(!B.is(":first-child")){B.removeClass("ui-timepicker-selected");B.prev().addClass("ui-timepicker-selected");if(B.prev().position().top<B.outerHeight()){C.scrollTop(C.scrollTop()-B.outerHeight())}}}return false;case 40:B=C.find(".ui-timepicker-selected");if(B.length===0){C.find("li").each(function(E,F){if(h(F).position().top>0){B=h(F);return false}});B.addClass("ui-timepicker-selected")}else{if(!B.is(":last-child")){B.removeClass("ui-timepicker-selected");B.next().addClass("ui-timepicker-selected");if(B.next().position().top+2*B.outerHeight()>C.outerHeight()){C.scrollTop(C.scrollTop()+B.outerHeight())}}}return false;case 27:C.find("li").removeClass("ui-timepicker-selected");w.hide();break;case 9:w.hide();break;default:return true}}function z(D){var A=h(this);var C=A.data("timepicker-list");var B=A.data("timepicker-settings");if(!C||!q(C)||B.disableTextInput){return true}switch(D.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:if(B.typeaheadHighlight){v(A,C)}else{C.hide()}break}}function m(A){var C=A.data("timepicker-settings");var D=A.data("timepicker-list");var B=null;var E=D.find(".ui-timepicker-selected");if(E.hasClass("ui-timepicker-disabled")){return false}if(E.length){B=E.data("time")}if(B!==null){if(typeof B!="string"){B=y(B,C)}c(A,B,"select")}return true}function b(F,D){F=Math.abs(F);var B=Math.round(F/60),E=[],A,C;if(B<60){E=[B,u.mins]}else{A=Math.floor(B/60);C=B%60;if(D==30&&C==30){A+=u.decimal+5}E.push(A);E.push(A==1?u.hr:u.hrs);if(D!=30&&C){E.push(C);E.push(u.mins)}}return E.join(" ")}function y(H,E){if(H===null){return null}var G=new Date(n.valueOf()+(H*1000));if(isNaN(G.getTime())){return null}if(h.type(E.timeFormat)==="function"){return E.timeFormat(G)}var B="";var A,F;for(var D=0;D<E.timeFormat.length;D++){F=E.timeFormat.charAt(D);switch(F){case"a":B+=(G.getHours()>11)?u.pm:u.am;break;case"A":B+=(G.getHours()>11)?u.PM:u.AM;break;case"g":A=G.getHours()%12;B+=(A===0)?"12":A;break;case"G":A=G.getHours();if(H===l){A=24}B+=A;break;case"h":A=G.getHours()%12;if(A!==0&&A<10){A="0"+A}B+=(A===0)?"12":A;break;case"H":A=G.getHours();if(H===l){A=E.show2400?24:0}B+=(A>9)?A:"0"+A;break;case"i":var C=G.getMinutes();B+=(C>9)?C:"0"+C;break;case"s":H=G.getSeconds();B+=(H>9)?H:"0"+H;break;case"\\":D++;B+=E.timeFormat.charAt(D);break;default:B+=F}}return B}function p(B,F){if(B===""){return null}if(!B||B+0==B){return B}if(typeof(B)=="object"){return B.getHours()*3600+B.getMinutes()*60+B.getSeconds()}B=B.toLowerCase().replace(/[\s\.]/g,"");if(B.slice(-1)=="a"||B.slice(-1)=="p"){B+="m"}var D="("+u.am.replace(".","")+"|"+u.pm.replace(".","")+"|"+u.AM.replace(".","")+"|"+u.PM.replace(".","")+")?";var I=new RegExp("^"+D+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+D+"$");var E=B.match(I);if(!E){return null}var C=parseInt(E[2]*1,10);var H=(C>24)?C%24:C;var J=E[1]||E[5];var K=H;if(H<=12&&J){var A=(J==u.pm||J==u.PM);if(H==12){K=A?12:0}else{K=(H+(A?12:0))}}var G=(E[3]*1||0);var L=(E[4]*1||0);var N=K*3600+G*60+L;if(H<12&&!J&&F&&F._twelveHourTime&&F.scrollDefault){var M=N-F.scrollDefault();if(M<0&&M>=l/-2){N=(N+(l/2))%l}}return N}function x(A){return("0"+A).slice(-2)}h.fn.timepicker=function(A){if(!this.length){return this}if(w[A]){if(!this.hasClass("ui-timepicker-input")){return this}return w[A].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof A==="object"||!A){return w.init.apply(this,arguments)}else{h.error("Method "+A+" does not exist on jQuery.timepicker")}}};h.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:false,disableTextInput:false,disableTimeRanges:[],disableTouchKeyboard:false,durationTime:null,forceRoundTime:false,maxTime:null,minTime:null,noneOption:false,orientation:"l",roundingFunction:function(C,A){if(C===null){return null}else{if(typeof A.step!=="number"){return C}else{var B=C%(A.step*60);if(B>=A.step*30){C+=(A.step*60)-B}else{C-=B}return C}}},scrollDefault:null,selectOnBlur:false,show2400:false,showDuration:false,showOn:["click","focus"],showOnFocus:true,step:30,stopScrollPropagation:false,timeFormat:"g:ia",typeaheadHighlight:true,useSelect:false}}));